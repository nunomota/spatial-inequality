<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>src.optimization.holdout API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>src.optimization.holdout</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from queue import Queue

class _HoldoutQueueItemWrapper:
    &#34;&#34;&#34;
    Wrapper class for any item to be added onto HoldoutQueue. All instances of
    this class allow storage of both an actual item and an associated (static)
    tag.

    Attributes:
        __item (Object): Stored item.
        __tag (Object): Stored tag.
    &#34;&#34;&#34;
    __item = None
    __tag = None
    
    def __init__(self, item, tag):
        self.__item = item
        self.__tag = tag
        
    def get_data(self):
        &#34;&#34;&#34;
        Getter method for the stored (unmodified) item.

        Returns:
            Object: Unmodified stored item.
        &#34;&#34;&#34;
        return self.__item
    
    def get_tag(self):
        &#34;&#34;&#34;
        Getter method for the stored item&#39;s tag.

        Returns:
            Object: Unmodified stored tag.
        &#34;&#34;&#34;
        return self.__tag
        
class HoldoutQueue:
    &#34;&#34;&#34;
    This class implements a holdout queue that, in addition to the functionality
    of a standard (FIFO) queue, allows for filtering on items upon dequeue. More
    specifically, instead of returning the first-most item in the queue, only
    the first item that validates a specified filtering condition will be
    dequeued. All other items will be held out as if the queue were empty,
    preserving their initial order.

    Internally, this class operates on top of two independent (FIFO) queues. The
    first (i.e., primary queue) is where all items are either enqueued to or
    dequeued from. The second queue (i.e., leftover queue) is where all items
    dequeued from the former queue get enqueued in case they do not validate the
    specified condition. When the primary queue becomes empty, then instances of
    this class can be &#39;recycled&#39;, swapping the primary and leftover queues.

    Attributes:
        __primary_queue (Queue): Underlying primary queue.
        __leftover_queue (Queue): Unerlying leftover queue.
        __get_item_tag (function): Function to calculate an item&#39;s tag.
        __is_valid (function): Function to validate an item (based on its tag).

    Example:
        &gt;&gt;&gt; def is_even(n):
        ...     return n%2 == 0
        &gt;&gt;&gt; holdout_queue = HoldoutQueue(is_valid=is_even)
        &gt;&gt;&gt; for i in range(5):
        ...     holdout_queue.enqueue(i)
        &gt;&gt;&gt; print(holdout_queue.dequeue())
        2
        &gt;&gt;&gt; print(holdout_queue.dequeue())
        4
    &#34;&#34;&#34;
    __primary_queue = None
    __leftover_queue = None
    __get_item_tag = None
    __is_valid = None
    
    def __init__(self, get_item_tag=lambda x:x, is_valid=lambda x:True):
        self.__primary_queue = Queue()
        self.__leftover_queue = Queue()
        self.__get_item_tag = get_item_tag
        self.__is_valid = is_valid
    
    def recycle(self):
        &#34;&#34;&#34;
        Recycles the holdout queue, swapping the primary and leftover queues.
        &#34;&#34;&#34;
        self.__primary_queue, self.__leftover_queue = self.__leftover_queue, self.__primary_queue
    
    def enqueue(self, item):
        &#34;&#34;&#34;
        Wraps a new item with _HoldoutQueueItemWrapper and adds it at the end of
        the holdout queue.

        Args:
            item (Object): Item to be added.
        &#34;&#34;&#34;
        item_wrapper = _HoldoutQueueItemWrapper(
            item,
            self.__get_item_tag(item)
        )
        self.__primary_queue.put(item_wrapper)
        
    def get_primary_queue(self):
        &#34;&#34;&#34;
        Getter method for the holdout queue&#39;s primary queue.

        Returns:
            Queue: Primary queue.
        &#34;&#34;&#34;
        return self.__primary_queue
        
    def dequeue(self):
        &#34;&#34;&#34;
        Retrieves the first valid _HoldoutQueueItemWrapper from the beginning of
        the holdout queue.

        Returns:
            Object: First valid item from the primary queue, or None if primary
                queue is empty.
        &#34;&#34;&#34;
        while True:
            if self.__is_empty():
                return None
            item_wrapper = self.__primary_queue.get()
            if self.__is_valid(item_wrapper):
                return item_wrapper.get_data()
            self.__leftover_queue.put(item_wrapper)
            
    def __is_empty(self):
        &#34;&#34;&#34;
        Checks whether the primary queue is empty.

        Returns:
            bool: &#39;true&#39; if primary queue is empty, &#39;false&#39; otherwise.
        &#34;&#34;&#34;
        return self.__primary_queue.empty()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="src.optimization.holdout.HoldoutQueue"><code class="flex name class">
<span>class <span class="ident">HoldoutQueue</span></span>
<span>(</span><span>get_item_tag=&lt;function HoldoutQueue.&lt;lambda&gt;&gt;, is_valid=&lt;function HoldoutQueue.&lt;lambda&gt;&gt;)</span>
</code></dt>
<dd>
<div class="desc"><p>This class implements a holdout queue that, in addition to the functionality
of a standard (FIFO) queue, allows for filtering on items upon dequeue. More
specifically, instead of returning the first-most item in the queue, only
the first item that validates a specified filtering condition will be
dequeued. All other items will be held out as if the queue were empty,
preserving their initial order.</p>
<p>Internally, this class operates on top of two independent (FIFO) queues. The
first (i.e., primary queue) is where all items are either enqueued to or
dequeued from. The second queue (i.e., leftover queue) is where all items
dequeued from the former queue get enqueued in case they do not validate the
specified condition. When the primary queue becomes empty, then instances of
this class can be 'recycled', swapping the primary and leftover queues.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>__primary_queue</code></strong> :&ensp;<code>Queue</code></dt>
<dd>Underlying primary queue.</dd>
<dt><strong><code>__leftover_queue</code></strong> :&ensp;<code>Queue</code></dt>
<dd>Unerlying leftover queue.</dd>
<dt><strong><code>__get_item_tag</code></strong> :&ensp;<code>function</code></dt>
<dd>Function to calculate an item's tag.</dd>
<dt><strong><code>__is_valid</code></strong> :&ensp;<code>function</code></dt>
<dd>Function to validate an item (based on its tag).</dd>
</dl>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; def is_even(n):
...     return n%2 == 0
&gt;&gt;&gt; holdout_queue = HoldoutQueue(is_valid=is_even)
&gt;&gt;&gt; for i in range(5):
...     holdout_queue.enqueue(i)
&gt;&gt;&gt; print(holdout_queue.dequeue())
2
&gt;&gt;&gt; print(holdout_queue.dequeue())
4
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class HoldoutQueue:
    &#34;&#34;&#34;
    This class implements a holdout queue that, in addition to the functionality
    of a standard (FIFO) queue, allows for filtering on items upon dequeue. More
    specifically, instead of returning the first-most item in the queue, only
    the first item that validates a specified filtering condition will be
    dequeued. All other items will be held out as if the queue were empty,
    preserving their initial order.

    Internally, this class operates on top of two independent (FIFO) queues. The
    first (i.e., primary queue) is where all items are either enqueued to or
    dequeued from. The second queue (i.e., leftover queue) is where all items
    dequeued from the former queue get enqueued in case they do not validate the
    specified condition. When the primary queue becomes empty, then instances of
    this class can be &#39;recycled&#39;, swapping the primary and leftover queues.

    Attributes:
        __primary_queue (Queue): Underlying primary queue.
        __leftover_queue (Queue): Unerlying leftover queue.
        __get_item_tag (function): Function to calculate an item&#39;s tag.
        __is_valid (function): Function to validate an item (based on its tag).

    Example:
        &gt;&gt;&gt; def is_even(n):
        ...     return n%2 == 0
        &gt;&gt;&gt; holdout_queue = HoldoutQueue(is_valid=is_even)
        &gt;&gt;&gt; for i in range(5):
        ...     holdout_queue.enqueue(i)
        &gt;&gt;&gt; print(holdout_queue.dequeue())
        2
        &gt;&gt;&gt; print(holdout_queue.dequeue())
        4
    &#34;&#34;&#34;
    __primary_queue = None
    __leftover_queue = None
    __get_item_tag = None
    __is_valid = None
    
    def __init__(self, get_item_tag=lambda x:x, is_valid=lambda x:True):
        self.__primary_queue = Queue()
        self.__leftover_queue = Queue()
        self.__get_item_tag = get_item_tag
        self.__is_valid = is_valid
    
    def recycle(self):
        &#34;&#34;&#34;
        Recycles the holdout queue, swapping the primary and leftover queues.
        &#34;&#34;&#34;
        self.__primary_queue, self.__leftover_queue = self.__leftover_queue, self.__primary_queue
    
    def enqueue(self, item):
        &#34;&#34;&#34;
        Wraps a new item with _HoldoutQueueItemWrapper and adds it at the end of
        the holdout queue.

        Args:
            item (Object): Item to be added.
        &#34;&#34;&#34;
        item_wrapper = _HoldoutQueueItemWrapper(
            item,
            self.__get_item_tag(item)
        )
        self.__primary_queue.put(item_wrapper)
        
    def get_primary_queue(self):
        &#34;&#34;&#34;
        Getter method for the holdout queue&#39;s primary queue.

        Returns:
            Queue: Primary queue.
        &#34;&#34;&#34;
        return self.__primary_queue
        
    def dequeue(self):
        &#34;&#34;&#34;
        Retrieves the first valid _HoldoutQueueItemWrapper from the beginning of
        the holdout queue.

        Returns:
            Object: First valid item from the primary queue, or None if primary
                queue is empty.
        &#34;&#34;&#34;
        while True:
            if self.__is_empty():
                return None
            item_wrapper = self.__primary_queue.get()
            if self.__is_valid(item_wrapper):
                return item_wrapper.get_data()
            self.__leftover_queue.put(item_wrapper)
            
    def __is_empty(self):
        &#34;&#34;&#34;
        Checks whether the primary queue is empty.

        Returns:
            bool: &#39;true&#39; if primary queue is empty, &#39;false&#39; otherwise.
        &#34;&#34;&#34;
        return self.__primary_queue.empty()</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="src.optimization.holdout.HoldoutQueue.dequeue"><code class="name flex">
<span>def <span class="ident">dequeue</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves the first valid _HoldoutQueueItemWrapper from the beginning of
the holdout queue.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Object</code></dt>
<dd>First valid item from the primary queue, or None if primary
queue is empty.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dequeue(self):
    &#34;&#34;&#34;
    Retrieves the first valid _HoldoutQueueItemWrapper from the beginning of
    the holdout queue.

    Returns:
        Object: First valid item from the primary queue, or None if primary
            queue is empty.
    &#34;&#34;&#34;
    while True:
        if self.__is_empty():
            return None
        item_wrapper = self.__primary_queue.get()
        if self.__is_valid(item_wrapper):
            return item_wrapper.get_data()
        self.__leftover_queue.put(item_wrapper)</code></pre>
</details>
</dd>
<dt id="src.optimization.holdout.HoldoutQueue.enqueue"><code class="name flex">
<span>def <span class="ident">enqueue</span></span>(<span>self, item)</span>
</code></dt>
<dd>
<div class="desc"><p>Wraps a new item with _HoldoutQueueItemWrapper and adds it at the end of
the holdout queue.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>item</code></strong> :&ensp;<code>Object</code></dt>
<dd>Item to be added.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def enqueue(self, item):
    &#34;&#34;&#34;
    Wraps a new item with _HoldoutQueueItemWrapper and adds it at the end of
    the holdout queue.

    Args:
        item (Object): Item to be added.
    &#34;&#34;&#34;
    item_wrapper = _HoldoutQueueItemWrapper(
        item,
        self.__get_item_tag(item)
    )
    self.__primary_queue.put(item_wrapper)</code></pre>
</details>
</dd>
<dt id="src.optimization.holdout.HoldoutQueue.get_primary_queue"><code class="name flex">
<span>def <span class="ident">get_primary_queue</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Getter method for the holdout queue's primary queue.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Queue</code></dt>
<dd>Primary queue.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_primary_queue(self):
    &#34;&#34;&#34;
    Getter method for the holdout queue&#39;s primary queue.

    Returns:
        Queue: Primary queue.
    &#34;&#34;&#34;
    return self.__primary_queue</code></pre>
</details>
</dd>
<dt id="src.optimization.holdout.HoldoutQueue.recycle"><code class="name flex">
<span>def <span class="ident">recycle</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Recycles the holdout queue, swapping the primary and leftover queues.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def recycle(self):
    &#34;&#34;&#34;
    Recycles the holdout queue, swapping the primary and leftover queues.
    &#34;&#34;&#34;
    self.__primary_queue, self.__leftover_queue = self.__leftover_queue, self.__primary_queue</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="src.optimization" href="index.html">src.optimization</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="src.optimization.holdout.HoldoutQueue" href="#src.optimization.holdout.HoldoutQueue">HoldoutQueue</a></code></h4>
<ul class="">
<li><code><a title="src.optimization.holdout.HoldoutQueue.dequeue" href="#src.optimization.holdout.HoldoutQueue.dequeue">dequeue</a></code></li>
<li><code><a title="src.optimization.holdout.HoldoutQueue.enqueue" href="#src.optimization.holdout.HoldoutQueue.enqueue">enqueue</a></code></li>
<li><code><a title="src.optimization.holdout.HoldoutQueue.get_primary_queue" href="#src.optimization.holdout.HoldoutQueue.get_primary_queue">get_primary_queue</a></code></li>
<li><code><a title="src.optimization.holdout.HoldoutQueue.recycle" href="#src.optimization.holdout.HoldoutQueue.recycle">recycle</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>